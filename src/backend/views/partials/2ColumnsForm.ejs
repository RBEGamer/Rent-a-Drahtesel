<div class="row" id="errorField">
    <% if(error != null)   { %>
        <div class='column-md-6'></div>
        <% Object.keys(error).forEach(function(key, index) { %>
            <div class='column-md-9 white margin padding'>
                <b><%= error[key].text %></b> : <%= error[key].error %>
            </div>
        <% }); %>
            
    <% } %>
</div>


<% Object.keys(forms).forEach(function(key,index) { %>
<div>
    <form id=<%=key %> method="post"  action="/<%=target %>" style="display: 
        <% if(key === start) { %>
            block;
        <% } else { %>
            none;
        <% } %>
        ">
            <input name="kind" type="hidden" value=<%= key %>>
            <input name="model" type="hidden" value=<%= forms[key].model %>>
            <% for(var i = 0; i < forms[key].elements.length; i+=2) { %> 
                <% var name = forms[key].elements[i].name; %>
                <% var value = "" %>
                <% if(data != null && data[name] != null) { %>
                <%  value = data[name] %>
                <% } %>
                <div class="row no-gutters">
                <div class="col-12 col-md-12 col-lg-2"></div>
                

                <div class="col-6 col-md-3 col-lg-2">
                    <div class="margin height text">
                        <span><%= forms[key].elements[i].text %></span>
                    </div>
                </div>

                <div class="col-6 col-md-3 col-lg-2">
                    <div class="margin height">
                        <input class="form-control height" 
                        <% var isFile = false; %>
                        <% Object.keys(forms[key].elements[i].input).forEach(function(key1, index1) { %>
                            <% if(forms[key].elements[i].input[key1] === 'file') { isFile = true;} %>
                            <%= key1 %> = "<%= forms[key].elements[i].input[key1] %>"
                        <% }); %>
                         <% if(!isFile) { %> name = "<%= forms[key].elements[i].name %>" value = "<%= value %>" <% } %>>
                         <% if(isFile) { %>
                            <input name="<%= forms[key].elements[i].name %>" type="hidden" value=<%= value %>>
                         <% } %>

                    </div>
                </div>
                


                <% if(i+1 < forms[key].elements.length) { %>
                <% var name2 = forms[key].elements[i+1].name; %>
                <% var value2 = "" %>
                <% if(data != null && data[name2] != null) { %>
                <%  value2 = data[name2] %>
                <% } %>
             
                <div class="col-6 col-md-3 col-lg-2">
                    <div class="margin height text">
                        <span><%= forms[key].elements[i+1].text %></span>
                    </div>
                </div>

                <div class="col-6 col-md-3 col-lg-2">
                    <div class="margin height">
                        <input class="form-control height" 
                        <% isFile = false; %>
                        <% Object.keys(forms[key].elements[i+1].input).forEach(function(key1, index1) { %>
                            <% if(forms[key].elements[i+1].input[key1] === 'file') { isFile = true;} %>
                            <%= key1 %> = "<%= forms[key].elements[i+1].input[key1] %>"
                        <% }); %>
                        <% if(!isFile) { %>name = "<%= forms[key].elements[i+1].name %>" value = "<%= value2 %>"<% } %>>
                        <% if(isFile) { %>
                            <input name="<%= forms[key].elements[i+1].name %>" type="hidden" value=<%= value %>>
                        <% } %>

                    </div>
                </div>
                <% } %>
                


                <div class="col-12 col-md-12 col-lg-2"></div>
                </div> 
            <% } %>    

    
       

        <div class="row no-gutters">
            <div class="col-12 col-md-12 col-lg-2"></div>
            <div class="col-6 col-md-3 col-lg-2">
                <div class="margin height textklein">
                    <span>*Pflichtfeld</span>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-2"></div>
            <div class="col-6 col-md-3 col-lg-2"></div>
            <div class="col-6 col-md-3 col-lg-2">
                <div class="margin height">
                    <button type="submit" class="btn btn-secondary btn-block height"><%= mode %></button>
                </div>
            </div>
            <div class="col-12 col-md-12 col-lg-2"></div>
        </div>
    </form>
<% }); %>

<div id="debug"></div>